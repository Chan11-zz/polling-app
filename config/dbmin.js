"use strict"
function insertDoc(e,s){return new Promise(function(l,a){s.insert(e,function(e,s){e?a(e):l(s)})})}function findDoc(e,s){return new Promise(function(l,a){s.findOne(e,function(e,s){e?a(e):l(s)})})}function updateDoc(e,s,l){var a=db.collection(l)
return new Promise(function(l,o){a.update(e,s,function(e,s){e?o(e):l(s)})})}function findDocToArray(e,s){return new Promise(function(l,a){s.find(e).toArray(function(e,s){e?a(e):l(s)})})}function deleteDoc(e,s){return new Promise(function(l,a){s.remove(e,function(e,s){e?a(e):l(s)})})}var mongodb=require("mongodb"),MongoClient=mongodb.MongoClient,db=null,url=process.env.MONGOLAB_URI,loaded=!1,preload={},connectMongo=function(){MongoClient.connect(url,function(e,s){e||(db=s)})},easyMongo=function(e,s,l){return new Promise(function(a,o){var n=db.collection(s)
e(l,n,db).then(function(e){a(e)})})},closeMongo=function(){db.close()}
module.exports={connectMongo:connectMongo,insertDoc:insertDoc,deleteDoc:deleteDoc,findDoc:findDoc,easyMongo:easyMongo,closeMongo:closeMongo,findDocToArray:findDocToArray,updateDoc:updateDoc,preload:preload}
