function insertDoc(a,b){return new Promise(function(c,d){b.insert(a,function(a,b){a?d(a):c(b)})})}function findDoc(a,b){return new Promise(function(c,d){b.findOne(a,function(a,b){a?d(a):c(b)})})}function updateDoc(a,b,c){var d=db.collection(c);return new Promise(function(c,e){d.update(a,b,function(a,b){a?e(a):c(b)})})}function findDocToArray(a,b){return new Promise(function(c,d){b.find(a).toArray(function(a,b){a?d(a):c(b)})})}function deleteDoc(a,b){return new Promise(function(c,d){b.remove(a,function(a,b){a?d(a):c(b)})})}var mongodb=require("mongodb"),MongoClient=mongodb.MongoClient,db=null,url=process.env.MONGOLAB_URI,loaded=!1,preload=new Object,connectMongo=function(){MongoClient.connect(url,function(a,b){a||(db=b)})},easyMongo=function(a,b,c){return new Promise(function(d,e){var f=db.collection(b);a(c,f,db).then(function(a){d(a)})})},closeMongo=function(){db.close()};module.exports={connectMongo:connectMongo,insertDoc:insertDoc,deleteDoc:deleteDoc,findDoc:findDoc,easyMongo:easyMongo,closeMongo:closeMongo,findDocToArray:findDocToArray,updateDoc:updateDoc,preload:preload};
